COPY	START	1000
FIRST	STL		RETADR
nil		LDB		#LENGTH
nil		BASE	LENGTH
CLOOP	+JSUB	RDREC
nil		LDA		LENGTH
nil		COMP	#0
nil		JEQ		ENDFIL
nil		+JSUB	WRREC
nil		J		CLOOP
ENDFIL	LDA		EOF
nil		STA		BUFFER
nil		LDA		#3
nil		STA		LENGTH
nil		+JSUB	WRREC
nil		J		@RETADR
EOF		BYTE	C`EOF`
RETADR	RESW	1
LENGTH	RESW	1
BUFFER	RESB	4096
RDREC	CLEAR	X
nil		CLEAR	A
nil		CLEAR	S
nil		+LDT	#4096
RLOOP	TD		INPUT
nil		JEQ		RLOOP
nil		RD		INPUT
nil		COMPR	A, S
nil		JEQ		EXIT
nil		STCH	BUFFER, X
nil		TIXR	T
nil		JLT		RLOOP
EXIT	STX		LENGTH
nil		RSUB	nil
INPUT	BYTE	X`F1`
WRREC	CLEAR	X
nil		LDT		LENGTH
WLOOP	TD		OUTPUT
nil		JEQ		WLOOP
nil		LDCH	BUFFER, X
nil		WD		OUTPUT
nil		TIXR	T
nil		JLT		WLOOP
nil		RSUB	nil
OUTPUT	BYTE	X`05`
nil		END 	FIRST
